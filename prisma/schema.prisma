generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id          Int       @id @default(autoincrement())
  username    String    @unique @db.VarChar(255)
  password    String    @db.VarChar(255)
  articles    articles[]
}

model articles {
  id            Int       @id @default(autoincrement())
  title         String    @db.VarChar(255)
  slug          String    @unique @db.VarChar(255) 
  description   String    @db.MediumText
  content       String    @db.LongText
  miniature     String    @db.MediumText
  author_id     Int       
  author        users     @relation(fields: [author_id], references: [id] )
  created_at    DateTime  @default(now())
}


model commercial_info_plus {
  id                              String                            @id @db.VarChar(50)
  info_id                         String                            @db.VarChar(50)
  number                          Int
  commercial_infos                commercial_infos                  @relation(fields: [info_id], references: [id])
  commercial_info_plus_paragraphs commercial_info_plus_paragraphs[]

  @@index([info_id], name: "fk_commercial_info_plus_info_id")
}

model commercial_info_plus_paragraphs {
  id                   Int                  @id @default(autoincrement())
  info_plus_id         String               @db.VarChar(50)
  title                String               @db.VarChar(255)
  text                 String               @db.MediumText
  number               Int
  commercial_info_plus commercial_info_plus @relation(fields: [info_plus_id], references: [id])

  @@index([info_plus_id], name: "fk_commercial_info_plus_paragraphs_info_plus_id")
}

model commercial_infos {
  id                      String                    @id @db.VarChar(50)
  product_code            String                    @db.VarChar(255)
  catch_phrase            String                    @db.MediumText
  products                products                  @relation(fields: [product_code], references: [interne_to])
  commercial_info_plus    commercial_info_plus[]
  commercial_reservations commercial_reservations[]

  @@index([product_code], name: "fk_commercial_infos_product_code")
}

model commercial_reservations {
  id               Int              @id @default(autoincrement())
  info_id          String           @db.VarChar(50)
  type             String           @db.VarChar(255)
  media            String           @db.LongText
  comment          String           @db.MediumText
  number           Int
  commercial_infos commercial_infos @relation(fields: [info_id], references: [id])

  @@index([info_id], name: "fk_commercial_reservations_info_id")
}

model delivery_services {
  id             Int      @id @default(autoincrement())
  product_code   String   @db.VarChar(255)
  number         Int
  direction      String   @db.VarChar(255)
  service_type   String   @db.VarChar(255)
  inclusion      String   @db.VarChar(255)
  way            String   @db.VarChar(255)
  departure_city String   @db.VarChar(255)
  products       products @relation(fields: [product_code], references: [interne_to])

  @@index([product_code], name: "fk_delivery_services_product_code")
}

model destinations {
  id           Int      @id @default(autoincrement())
  product_code String   @db.VarChar(255)
  number       Int
  city         String   @db.VarChar(255)
  products     products @relation(fields: [product_code], references: [interne_to])

  @@index([product_code], name: "fk_destinations_product_code")
}

model option_description_paragraph_objects {
  id                            Int                           @id @default(autoincrement())
  paragraph_id                  String                        @db.VarChar(50)
  number                        Int
  small                         String                        @db.LongText
  big                           String                        @db.LongText
  legende                       String                        @db.MediumText
  type                          String                        @db.VarChar(50)
  option_description_paragraphs option_description_paragraphs @relation(fields: [paragraph_id], references: [id])

  @@index([paragraph_id], name: "fk_option_description_paragraph_objects_paragraph_id")
}

model option_description_paragraphs {
  id                                   String                                 @id @db.VarChar(50)
  description_id                       String                                 @db.VarChar(50)
  number                               Int
  title                                String                                 @db.VarChar(255)
  text                                 String                                 @db.LongText
  option_descriptions                  option_descriptions                    @relation(fields: [description_id], references: [id])
  option_description_paragraph_objects option_description_paragraph_objects[]

  @@index([description_id], name: "fk_option_description_paragraphs_description_id")
}

model option_descriptions {
  id                            String                          @id @db.VarChar(50)
  option_id                     String                          @db.VarChar(50)
  number                        Int
  small_picto                   String                          @db.LongText
  big_picto                     String                          @db.LongText
  options                       options                         @relation(fields: [option_id], references: [id])
  option_description_paragraphs option_description_paragraphs[]

  @@index([option_id], name: "fk_option_descriptions_option_id")
}

model options {
  id                  String                @id @db.VarChar(50)
  product_code        String                @db.VarChar(255)
  accomodation_type   String                @db.VarChar(255)
  accomodation_name   String                @db.VarChar(255)
  theme_to            String                @db.VarChar(255)
  theme_ceto          String                @db.VarChar(255)
  products            products              @relation(fields: [product_code], references: [interne_to])
  option_descriptions option_descriptions[]

  @@index([product_code], name: "fk_options_product_code")
}

model products {
  code              String              @db.VarChar(255)
  name              String              @db.VarChar(255)
  sale              String              @db.VarChar(255)
  option            String              @db.VarChar(255)
  presentable_alone String              @db.VarChar(255)
  with_delivery     String              @db.VarChar(255)
  interne_to        String              @id @db.VarChar(255)
  commercial_infos  commercial_infos[]
  delivery_services delivery_services[]
  destinations      destinations[]
  options           options[]
  air_types         air_types[]
}

model air_type_begins {
  id                                                  String                                @id @db.VarChar(50)
  air_type_id                                         String                                @db.VarChar(50)
  between_begin                                       DateTime                              @db.Date
  between_end                                         DateTime                              @db.Date
  end_moment                                          String                                @db.VarChar(50)
  day                                                 Int
  price_main_ref                                      String                                @db.VarChar(100)
  price_quantity                                      String                                @db.VarChar(50)
  price_code_value                                    String                                @db.VarChar(50)
  price_code_name                                     String                                @db.VarChar(50)
  price_tax_value                                     Int
  price_value                                         Int
  price_original_value                                Int?
  price_ref                                           String                                @db.VarChar(50)     
  rule_code_value                                     String                                @db.VarChar(50)
  rule_code_name                                      String                                @db.VarChar(50)
  rule_at_ref                                         String                                @db.VarChar(50)
  air_type_price_quantities                           air_type_rule_quantities[] 
  air_types                                           air_types                     @relation(fields: [air_type_id], references: [id])
  price_data                                          price_data                    @relation(fields: [price_main_ref], references: [id])

  @@index([air_type_id], name: "fk_air_type_begins_air_type_id")
  @@index([price_main_ref], name: "fk_air_type_price_data_id")
}


model air_type_rule_quantities {
  id                           Int                          @id @default(autoincrement())
  air_type_begin_id            String                       @db.VarChar(50)
  topic                        String                       @db.VarChar(50)
  unit                         String                       @db.VarChar(50)
  max                          Int
  min                          Int
  air_type_price_rules         air_type_begins              @relation(fields: [air_type_begin_id], references: [id])

  @@index([air_type_begin_id], name: "fk_air_type_price_quantities_air_type_begin_id")
}

model air_types {
  id                      String                    @id @db.VarChar(50)
  product_code            String                    @db.VarChar(255)
  from_ref                String                    @db.VarChar(50)
  from_default            String                    @db.VarChar(50)
  to_ref                  String                    @db.VarChar(50)
  products                products                  @relation(fields: [product_code], references: [interne_to])
  air_type_begins         air_type_begins[]

  @@index([product_code], name: "fk_air_types_product_code")
}

model stay_type_meal_plans {
  id              String          @id @db.VarChar(50) 
  code_txt        String?          @db.VarChar(50)
  code            String          @db.VarChar(50)
  text            String          @db.VarChar(50)
  price_data      price_data[]
}

model price_data {
  id                      String                    @id @db.VarChar(100)
  currency                String? 
  decimals                Int? 
  quantity                String? 
  role                    String?
  duration_night          Int       
  duration_day            Int 
  quantity_for            String                    @db.VarChar(50)
  quantity_unit           String                    @db.VarChar(50)
  meal_plan_ref           String                    @db.VarChar(50)
  room_ref                String                    @db.VarChar(50)  
  traveller_type          String                    @db.VarChar(50)
  traveller_quantity      Int    
  air_type_begins         air_type_begins[]
  meal_plan               stay_type_meal_plans      @relation(fields: [meal_plan_ref], references: [id])

  @@index([meal_plan_ref], name: "fk_meal_plan_ref")
}



